import random
import json

# =====================
# 검색 관련 템플릿
# =====================
# =====================
# 검색 관련 템플릿 70개
# =====================
search_templates = [
    "이 {subject} 알려줘", "{subject} 어때?", "{subject} 찾아줘", 
    "{subject} 정보 알려줄래?", "{subject} 뭐야?", "요즘 {subject} 소식 있어?", 
    "최신 {subject} 알려줘", "{subject} 순위 알려줘", 
    "{subject} 평점 알려줘", "{subject} 리뷰 볼 수 있을까?", "인기 {subject} 뭐야?", 
    "{subject} 사진 보여줘", "{subject} 영상 찾아줘", "주간 {subject} 뉴스", 
    "{subject} 관련 기사 알려줘", "{subject} 이벤트 정보", 
    "{subject} 랭킹 알려줘", "{subject} 트렌드 보여줘", "{subject} 검색해줘",
    "오늘 {subject} 소식", "{subject} 후기 알려줘", "{subject} 후기 볼래", 
    "최근 {subject} 정보", "{subject} 오늘 소식", "{subject} 인기 뉴스", 
    "{subject} 최신 정보", "{subject} 신작 뭐야?", "{subject} 추천 순위", 
    "{subject} 베스트 10", "{subject} 리뷰 모아줘", "{subject} 관련 정보 찾아줘", 
    "오늘의 {subject}", "이번 주 {subject}", "이번 달 {subject}", "{subject} 이벤트", 
    "{subject} 할인 정보", "{subject} 티켓 정보", "{subject} 구매 정보", 
    "{subject} 가격 알아?", "{subject} 상세 정보 알려줘", 
    "{subject} 사진 좀 보여줘", "어제 {subject} 소식", "지난 주 {subject} 뉴스", 
    "최신 {subject} 영상", "{subject} 인기 게시물", 
    "{subject} 인기 영상", "{subject} 트렌드 뉴스", "{subject} 핫이슈", 
    "{subject} 최신 업데이트", "{subject} 정보 확인", "{subject} 자료 찾아줘", 
    "{subject} 데이터 알려줘", "{subject} 분석 결과", "{subject} 통계", 
    "{subject} 관련 자료", "{subject} 정보 요약", "{subject} 오늘의 정보", 
    "{subject} 주간 소식", "{subject} 월간 소식", "{subject} 뉴스 모음", 
    "{subject} 최근 기사", "{subject} 인기 검색", "{subject} 트렌드 확인", 
    "{subject} 소식 모아줘"
]

non_search_templates = [
    # 기존 템플릿 유지
    "안녕, 오늘 기분 어때?", "좋은 아침!", "오늘 날씨가 좋네", "너 오늘 뭐 했어?", 
    "나는 지금 커피 마시고 있어", "오늘 점심 뭐 먹었어?", "오늘 하루 어땠어?", 
    "주말 계획 있어?", "좋은 밤 되길 바래", "오늘 하루 힘냈어?", "쉬는 날 뭐 해?", 
    "지금 기분 어때?", "오늘 운동했어?", "오늘 기분 좋은 일 있었어?", 
    "오늘 스트레스 많았어?", "오늘 기분 다운?", "지금 어디야?", 
    "오늘 뭐 읽었어?", "오늘 뭐 봤어?", "오늘 음악 들었어?", 
    "오늘 영화 봤어?", "오늘 책 읽었어?", "오늘 뉴스 봤어?", 
    "점심 뭐 먹을 거야?", "저녁 뭐 먹을 거야?", "오늘 날씨 어때?", 
    "오늘 기분 좋아?", "오늘 일찍 일어났어?", "오늘 늦게 잤어?", 
    "커피 마셨어?", "차 마셨어?", "지금 바빠?", "오늘 회의 있었어?", 
    "오늘 수업 들었어?", "오늘 뭐 공부했어?", "오늘 기분은?", 
    "오늘 날씨는 어때?", "오늘 친구 만났어?", "오늘 가족과 뭐 했어?", 
    "오늘 기분 상태?", "오늘 하루 요약해줘", "오늘 재미있었어?", 
    "오늘 피곤해?", "오늘 기운 어때?", "오늘 감정 상태?", "오늘 집중 잘 돼?", 
    "오늘 여행 계획 있어?", "오늘 쇼핑했어?", "오늘 집에 있었어?", 
    "오늘 산책했어?", "오늘 운동했어?", "오늘 기분 최고야?", "오늘 기분 별로야?", 
    "오늘 행복했어?", "오늘 슬펐어?", "오늘 화났어?", "오늘 웃었어?", 
    "오늘 울었어?", "오늘 노래 들었어?", "오늘 영화 추천해줘", "오늘 책 추천해줘", 
    "오늘 뉴스 추천해줘", "오늘 정보 알려줘", "오늘 재미있는 일 있었어?", 
    "어제는 뭐 했어?", "어제 뭐 했어?", "오늘 뭐 할 거야?", "오늘 집에 있을 거야?", 
    "오늘 뭐 먹을 거야?", "오늘 운동할 거야?", "오늘 쉬는 날이야?", "오늘 기분 어때?", "안녕", "안녕하세요",
    
    # 새로 추가한 다양한 일상 질문
    "오늘 아침 뭐 먹었어?", "점심시간 잘 보냈어?", "오늘 출근길 어땠어?", 
    "오늘 버스/지하철 어땠어?", "오늘 기분이 왜 그래?", "오늘 웃긴 일 있었어?", 
    "오늘 짜증나는 일 있었어?", "오늘 행복했던 순간 있어?", "오늘 새로운 거 배웠어?", 
    "오늘 음악 추천해줄래?", "오늘 영화 볼래?", "오늘 드라마 봤어?", 
    "오늘 게임 했어?", "오늘 친구랑 뭐 했어?", "오늘 가족과 맛있는 거 먹었어?", 
    "오늘 카페 갔어?", "오늘 산책 갔어?", "오늘 운동 후 기분 어때?", 
    "오늘 쇼핑 재미있었어?", "오늘 온라인 쇼핑했어?", "오늘 기분 좋은 사진 찍었어?", 
    "오늘 사진 많이 찍었어?", "오늘 SNS 봤어?", "오늘 새로운 앱 써봤어?", 
    "오늘 좋아하는 음식 먹었어?", "오늘 커피 마신 종류 뭐야?", "오늘 차 마신 종류 뭐야?", 
    "오늘 점심 메뉴 추천해줄래?", "오늘 저녁 메뉴 추천해줄래?", "오늘 집에서 뭐 했어?", 
    "오늘 외출했어?", "오늘 날씨 때문에 기분 어땠어?", "오늘 졸렸어?", 
    "오늘 아침에 뭐 입었어?", "오늘 코디 괜찮았어?", "오늘 신발 편했어?", 
    "오늘 친구랑 통화했어?", "오늘 가족과 통화했어?", "오늘 누굴 만났어?", 
    "오늘 특별한 일 있었어?", "오늘 기념일 있었어?", "오늘 축하할 일 있었어?", 
    "오늘 기분 최고였던 순간 뭐야?", "오늘 기분 최악이었던 순간 뭐야?", 
    "오늘 책 읽고 뭐 느꼈어?", "오늘 영화 보고 뭐 느꼈어?", "오늘 뉴스 보고 뭐 느꼈어?", 
    "오늘 유튜브 뭐 봤어?", "오늘 틱톡 봤어?", "오늘 인스타 봤어?", 
    "오늘 배운 거 공유해줄래?", "오늘 궁금한 거 생겼어?", "오늘 계획한 일 다 했어?", 
    "오늘 늦게까지 뭐 했어?", "오늘 낮잠 잤어?", "오늘 저녁 뭐 먹었어?", 
    "오늘 운동 계획 다 했어?", "오늘 스트레칭 했어?", "오늘 친구 만나서 뭐 했어?", 
    "오늘 혼자 뭐 했어?", "오늘 카페에서 뭐 마셨어?", "오늘 집에서 뭐 먹었어?", 
    "오늘 기분 표현한다면 이모지 뭐야?", "오늘 기분 표현한다면 한 단어 뭐야?", 
    "오늘 특별한 기념 사진 찍었어?", "오늘 옷 새로 샀어?", "오늘 장 본 거 있어?", 
    "오늘 노래 만들었어?", "오늘 그림 그렸어?", "오늘 영상 찍었어?", "오늘 여행 갔다왔어?", 
    "오늘 드라이브 했어?", "오늘 맛집 갔어?", "오늘 배달 시켰어?", "오늘 간식 먹었어?", 
    "오늘 간단한 요리 했어?", "오늘 설거지 했어?", "오늘 청소 했어?", "오늘 방 정리했어?", 
    "오늘 운동복 입었어?", "오늘 날씨 때문에 기분이 바뀌었어?", "오늘 친구와 게임했어?", 
    "오늘 혼자 영화 봤어?", "오늘 혼자 커피 마셨어?", "오늘 혼자 산책했어?", 
    "오늘 혼자 음악 들었어?", "오늘 집중 잘 됐어?", "오늘 공부 잘 됐어?", 
    "오늘 잠은 잘 잤어?", "오늘 아침 루틴 했어?", "오늘 저녁 루틴 했어?", 
    "오늘 주말 계획 미리 세웠어?", "오늘 목표 달성했어?", "오늘 새롭게 도전한 거 있어?", 
    "오늘 기분 변화가 심했어?", "오늘 스트레스 푼 방법 있어?", "오늘 친구와 웃긴 이야기 했어?", 
    "오늘 TV 봤어?", "오늘 뉴스 기사 읽었어?", "오늘 SNS 글 썼어?", "오늘 일기 썼어?", 
    "오늘 명상 했어?", "오늘 잠깐 쉬었어?", "오늘 좋아하는 사람 생각했어?", "오늘 고민 있어?", 
    "오늘 새로운 사람 만났어?", "오늘 도움 준 일 있었어?", "오늘 칭찬 받은 일 있어?", 
    "오늘 아픈 데 있었어?", "오늘 건강 체크 했어?", "오늘 몸무게 쟀어?", "오늘 기분일기 써볼래?", 
    "오늘 사진 찍은 거 보여줄래?", "오늘 영상 편집했어?", "오늘 집에서 운동했어?", 
    "오늘 요가 했어?", "오늘 스트레칭 했어?", "오늘 피곤해서 쉬었어?", "오늘 간식 뭐 먹었어?", 
    "오늘 게임 점수 높았어?", "오늘 공부 목표 달성했어?", "오늘 물 많이 마셨어?", 
    "오늘 친구와 통화 길게 했어?", "오늘 날씨와 기분 연결돼?", "오늘 웃음 많았어?", 
    "오늘 감정 기록했어?", "오늘 기분 그래프 만든다면 몇 점이야?", "오늘 행복 포인트 몇 점이야?", 
    "오늘 슬픈 포인트 몇 점이야?", "오늘 맛있는 거 먹었어?", "오늘 외출했어?", 
    "오늘 쇼핑 즐거웠어?", "오늘 집안일 했어?", "오늘 기분 변화 있었어?", "오늘 새로운 거 시도했어?", 
    "오늘 친구랑 수다 떨었어?", "오늘 가족과 대화 많았어?", "오늘 좋아하는 영화 생각났어?", 
    "오늘 새로운 앱 설치했어?", "오늘 공부하면서 배운 거 있어?", "오늘 운동 계획 성공했어?", 
    "오늘 체력 상태 어때?", "오늘 컨디션 좋았어?", "오늘 잠깐 낮잠 잤어?", "오늘 기분 기록할래?", 
    "오늘 하루 마무리 잘 했어?", "오늘 밤 잠 잘 자?", "오늘 피드백 받은 거 있어?", "오늘 기분 체크 했어?", 
    "오늘 재미있는 유튜브 영상 봤어?", "오늘 인터넷에서 뭐 찾아봤어?", "오늘 새로운 정보 알았어?", 
    "오늘 기분 좋은 일 한 가지는 뭐야?", "오늘 기분 나쁜 일 한 가지는 뭐야?", "오늘 기분 중립적인 일 있었어?", 
    "오늘 기분 표현하면 어떤 색?", "오늘 기분 표현하면 어떤 날씨?", "오늘 마음 상태 기록할래?", 
    "오늘 하루 점수 준다면 몇 점?", "오늘 하루 사진 남길래?", "오늘 하루 영상 남길래?", 
    "오늘 하루 메모 남길래?", "오늘 하루 기록 남길래?"
]


# =====================
# 코딩 관련 템플릿 70개
# =====================
coding_templates = [
    "{subject} 코드 예제 보여줘", "{subject} 어떻게 구현해?", "{subject} 예제 코드 있어?", 
    "{subject} 사용법 알려줘", "{subject} 샘플 코드", "{subject} 코드 리뷰 해줘", 
    "{subject} 버그 고쳐줘", "{subject} 최적화 방법", "{subject} 예제 만들어줘", 
    "{subject} 함수 작성해줘", "{subject} 라이브러리 추천", "{subject} 프로젝트 아이디어", 
    "{subject} 알고리즘 구현", "{subject} 문제 해결 방법", "{subject} 코드 설명해줘",
    "{subject} 디버깅 도움", "{subject} 코드 개선", "{subject} 테스트 코드 작성",
    "{subject} 코딩 연습문제", "{subject} 실습 예제", "{subject} 코드 분석",
    "{subject} 코드 구조 설계", "{subject} Python 예제", "{subject} JavaScript 예제",
    "{subject} Java 코드", "{subject} C++ 예제", "{subject} HTML/CSS 예제",
    "{subject} SQL 쿼리 예제", "{subject} API 사용 예제", "{subject} 데이터 처리 예제",
    "{subject} 머신러닝 코드", "{subject} 딥러닝 구현", "{subject} 모델 학습 코드",
    "{subject} 그래프 그리는 코드", "{subject} 시각화 예제", "{subject} 알고리즘 문제풀이",
    "{subject} 코딩 챌린지", "{subject} 프로젝트 템플릿", "{subject} Git 사용법",
    "{subject} 코드 포맷팅", "{subject} 에러 해결", "{subject} 코드 디버깅",
    "{subject} 함수 최적화", "{subject} 클래스 작성 예제", "{subject} 객체지향 예제",
    "{subject} 함수 설명", "{subject} 모듈 사용법", "{subject} 패키지 설치",
    "{subject} 환경설정", "{subject} 테스트 자동화", "{subject} 스크립트 작성",
    "{subject} 반복문 예제", "{subject} 조건문 예제", "{subject} 변수 선언",
    "{subject} 데이터 구조 구현", "{subject} 리스트 처리", "{subject} 딕셔너리 활용",
    "{subject} 문자열 처리", "{subject} 파일 입출력", "{subject} 예외 처리",
    "{subject} 재귀 함수 예제", "{subject} 라이브러리 함수 활용", "{subject} 코드 최적화",
    "{subject} 알고리즘 시간 복잡도", "{subject} 메모리 최적화", "{subject} 코드 연습문제",
    "{subject} 코딩 학습 자료", "{subject} 실습 프로젝트"
]

# =====================
# subjects 분리
# =====================
general_subjects = [
    "영화", "맛집", "뉴스", "노래", "책", "게임", "드라마", "앱", "웹툰", "운동",
    "여행", "카페", "음식", "패션", "쇼핑", "자동차", "테크", "건강", "주식", "날씨"
]

coding_subjects = [
    "Python", "머신러닝", "딥러닝", "머신 러닝", "딥 러닝", "tensorflow", "keras", "Keras", "sklearn", "사이킷런", "Tensorflow", "CNN", "cnn", "RNN", "LSTM", "SVM", "선형회귀", "선형 회귀"
]

# =====================
# synonyms 확장
# =====================
synonyms = {
    "영화": ["무비", "필름", "시네마", "영화작품"],
    "맛집": ["레스토랑", "식당", "푸드코트", "맛있는집", "맛집추천"],
    "뉴스": ["소식", "뉴스기사", "기사", "보도", "헤드라인"],
    "노래": ["곡", "송", "뮤직", "음악", "트랙"],
    "책": ["도서", "서적", "북", "책자", "출판물"]
}


def replace_synonyms(text):
    for subj, syns in synonyms.items():
        if subj in text:
            text = text.replace(subj, random.choice([subj]+syns))
    return text

def remix_sentence(text):
    words = text.split()
    random.shuffle(words)
    return ' '.join(words)

# =====================
# 데이터셋 생성
# =====================
num_search_samples = 350
num_non_search_samples = 1250*4
num_coding_samples = 1250

dataset = []

# 검색 샘플 생성
while len([d for d in dataset if d['intent']=='search']) < num_search_samples:
    template = random.choice(search_templates)
    subject = random.choice(general_subjects)
    text = template.replace("{subject}", subject)
    text = replace_synonyms(text)
    if random.random() < 0.2:
        text = remix_sentence(text)
    dataset.append({"text": text, "intent": "search"})

# 비검색 샘플 생성
while len([d for d in dataset if d['intent']=='non_search']) < num_non_search_samples:
    template = random.choice(non_search_templates)
    text = template
    if random.random() < 0.2:
        text = remix_sentence(text)
    dataset.append({"text": text, "intent": "non_search"})

# 코딩 샘플 생성
while len([d for d in dataset if d['intent']=='coding']) < num_coding_samples:
    template = random.choice(coding_templates)
    subject = random.choice(coding_subjects)
    text = template.replace("{subject}", subject)
    if random.random() < 0.2:
        text = remix_sentence(text)
    dataset.append({"text": text, "intent": "coding"})

# =====================
# JSONL로 저장 (섞어서)
# =====================
random.shuffle(dataset)
with open("intent_dataset.jsonl", "w", encoding="utf-8") as f:
    for sample in dataset:
        f.write(json.dumps(sample, ensure_ascii=False) + "\n")

print(f"데이터셋 생성 완료! 총 샘플 수: {len(dataset)}")
